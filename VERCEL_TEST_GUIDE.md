# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ Vercel

## –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Environment Variables –≤ Vercel

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Vercel Dashboard](https://vercel.com/dashboard)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings ‚Üí Environment Variables**
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è **Production**, **Preview**, –∏ **Development**:

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```
VITE_VAPID_PUBLIC_KEY=BBlLbSe_SjJlSQnW8o_aZy-POYWSaXLxVb9nvqQsjlTnlRVROpteO4KV4QfcmICNewtJwHYClDirrEA3hFMujnw

VAPID_PUBLIC_KEY=BBlLbSe_SjJlSQnW8o_aZy-POYWSaXLxVb9nvqQsjlTnlRVROpteO4KV4QfcmICNewtJwHYClDirrEA3hFMujnw

VAPID_PRIVATE_KEY=kj6IO74-o_4WSvMbh3WkdithcN026OBosGIk4zgrEYM

VAPID_SUBJECT=mailto:noreply@babycare.app
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è CORS):

```
CORS_ALLOWED_ORIGINS=https://your-domain.vercel.app,https://your-domain.com
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å `CORS_ALLOWED_ORIGINS`, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ—Ç–æ—Ä–æ–µ –≤–∫–ª—é—á–∞–µ—Ç `https://*.vercel.app`.

## –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Deployment

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Deployments**
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π deployment
3. –ù–∞–∂–º–∏—Ç–µ **‚Ä¢‚Ä¢‚Ä¢ ‚Üí Redeploy**
4. –ò–ª–∏ —Å–¥–µ–ª–∞–π—Ç–µ –Ω–æ–≤—ã–π commit –∏ push –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è

## –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API Endpoint

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ API endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_PROJECT.vercel.app –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω
curl -X POST https://YOUR_PROJECT.vercel.app/api/push/send \
  -H "Content-Type: application/json" \
  -d '{
    "subscription": {
      "endpoint": "test",
      "keys": {
        "p256dh": "test",
        "auth": "test"
      }
    },
    "title": "Test",
    "body": "Test"
  }'
```

–î–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å—Å—è –æ—à–∏–±–∫–∞ –ø—Ä–æ –Ω–µ–≤–∞–ª–∏–¥–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É, –Ω–æ –Ω–µ –æ—à–∏–±–∫–∞ –ø—Ä–æ VAPID –∫–ª—é—á–∏.

## –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### 4.1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Vercel

–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –¥–µ–ø–ª–æ–π –Ω–∞ Vercel (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://your-project.vercel.app`)

### 4.2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools

1. –ù–∞–∂–º–∏—Ç–µ `F12` –∏–ª–∏ `Ctrl+Shift+I`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ—Ç –ª–∏ –æ—à–∏–±–æ–∫

### 4.3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí üîî Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
2. –ù–∞–∂–º–∏—Ç–µ **"–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"**
3. –†–∞–∑—Ä–µ—à–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
4. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–µ

### 4.4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

1. –í —Ä–∞–∑–¥–µ–ª–µ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**
2. –í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ç–µ–∫—Å—Ç
3. –ù–∞–∂–º–∏—Ç–µ **"–û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ"**
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ—è–≤–∏–ª–æ—Å—å

## –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Vercel

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Deployments** –≤ Vercel Dashboard
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à deployment
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Functions ‚Üí api/push/send**
4. –ù–∞–∂–º–∏—Ç–µ **View Logs**
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:

**–û—à–∏–±–∫–∞:** `VAPID keys are missing!`
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `VAPID_PUBLIC_KEY` –∏ `VAPID_PRIVATE_KEY` –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Environment Variables

**–û—à–∏–±–∫–∞:** `CORS error`
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω –≤ `CORS_ALLOWED_ORIGINS` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `*` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–û—à–∏–±–∫–∞:** `Invalid subscription`
- **–†–µ—à–µ–Ω–∏–µ:** –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –∑–∞–Ω–æ–≤–æ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ Service Worker

Service Worker –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. –í DevTools –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Application ‚Üí Service Workers**
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
3. –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **activated and is running**

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –º–æ–≥—É –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ VAPID –∫–ª—é—á–∏:**
   ```bash
   # –í –ª–æ–≥–∞—Ö Vercel –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   # "VAPID keys configured successfully"
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω—ã
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ `chrome://settings/content/notifications`

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Service Worker:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `/sw.js` –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS

### –ü—Ä–æ–±–ª–µ–º–∞: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–ø–∏—Å–∫–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–¥–ø–∏—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ç–∞–±–ª–∏—Ü–µ `push_subscriptions`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API endpoint:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `/api/push/send` –¥–æ—Å—Ç—É–ø–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Vercel Functions

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ VAPID –∫–ª—é—á–∏:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –í Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è –Ω—É–∂–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API —á–µ—Ä–µ–∑ curl

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è endpoint
curl https://YOUR_PROJECT.vercel.app/api/push/send

# –î–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å—Å—è –æ—à–∏–±–∫–∞ 405 (Method Not Allowed), 
# —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
```

## –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ Vercel. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Vercel Functions.
