# Локальная разработка с API endpoints

## Проблема

При локальной разработке через `npm run dev` (Vite) API endpoints `/api/push/*` недоступны, так как Vite не обслуживает эти маршруты. Они работают только через Vercel dev server или в продакшене.

## Решение

### Вариант 1: Использовать Vercel Dev (рекомендуется)

Для полноценной локальной разработки с API endpoints:

```bash
# Установите Vercel CLI (если еще не установлен)
npm install -g vercel

# Запустите Vercel dev server
vercel dev
```

Это запустит:
- Frontend на `http://localhost:3000`
- API endpoints на `http://localhost:3000/api/push/*`

### Вариант 2: Работать в продакшене

Для тестирования напоминаний можно работать с продакшен версией приложения, где API endpoints доступны.

### Вариант 3: Только планирование (без обработки)

Вы можете:
- ✅ Планировать напоминания (они сохраняются в БД)
- ❌ Не обрабатывать напоминания (API недоступен)

Напоминания будут обработаны:
- В продакшене автоматически
- При следующем открытии приложения в продакшене

## Что работает без Vercel Dev

✅ **Работает:**
- Планирование напоминаний (сохранение в БД)
- Просмотр запланированных напоминаний
- Создание тестовых напоминаний
- Проверка подписок

❌ **Не работает:**
- Обработка напоминаний (отправка уведомлений)
- Ручная обработка через `processRemindersNow()`

## Проверка доступности API

В консоли браузера вы увидите:

```
ℹ️ API endpoint недоступен (локальная разработка). Для обработки напоминаний запустите: vercel dev
```

Это нормально для локальной разработки без Vercel dev.

## Тестирование напоминаний

### В локальной разработке (без Vercel Dev)

1. Создайте тестовое напоминание:
```javascript
window.debugReminders.createImmediateTestReminder(1, 'diaper')
```

2. Проверьте, что оно создано:
```javascript
window.debugReminders.checkScheduledReminders(1)
```

3. Обработка не сработает (API недоступен), но напоминание будет обработано в продакшене или при запуске `vercel dev`.

### С Vercel Dev

1. Запустите `vercel dev`
2. Создайте тестовое напоминание:
```javascript
window.debugReminders.createImmediateTestReminder(1, 'diaper')
```

3. Обработайте вручную:
```javascript
window.debugReminders.processRemindersNow()
```

4. Должно прийти push-уведомление!

## Настройка Vercel Dev

При первом запуске `vercel dev` нужно настроить проект:

1. Выберите проект (если уже есть на Vercel)
2. Или создайте новый проект
3. Настройте переменные окружения (если нужно)

После этого API endpoints будут доступны локально.


