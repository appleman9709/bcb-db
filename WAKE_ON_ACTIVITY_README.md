# üåÖ –§—É–Ω–∫—Ü–∏—è "–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏"

## üìã –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### 1. **–ù–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**
- ‚úÖ –ü–æ–ª–µ `wake_on_activity_enabled` –≤ —Ç–∞–±–ª–∏—Ü–µ `settings` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `TRUE`)
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä `wake_on_activity_trigger` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–Ω–∞ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `wake_on_activity()` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ `pg_notify` –æ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–∏ –º–∞–ª—ã—à–∞

### 2. **Backend —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Settings` –≤ `dataService.ts`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `updateSettings()`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π —Å–Ω–∞ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### 3. **Frontend –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
- ‚úÖ –ù–æ–≤—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Dashboard: "–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏"
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–π UI —Å –∏–∫–æ–Ω–∫–æ–π üåÖ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è (–≤–∫–ª—é—á–µ–Ω–æ/–æ—Ç–∫–ª—é—á–µ–Ω–æ)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `SettingsState` –≤ –æ–±–æ–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

### 4. **–í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è**
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ "üåÖ –ú–∞–ª—ã—à –ø—Ä–æ—Å–Ω—É–ª—Å—è –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏!" –≤ –¢–∞–º–∞–≥–æ—á–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–Ω–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üóÑÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç –≤ Supabase SQL Editor:

```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ wake_on_activity_update.sql
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª–µ `wake_on_activity_enabled` –≤ —Ç–∞–±–ª–∏—Ü—É `settings`
- –°–æ–∑–¥–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `wake_on_activity()` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–Ω–∞
- –°–æ–∑–¥–∞–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä `wake_on_activity_trigger` –Ω–∞ —Ç–∞–±–ª–∏—Ü–µ `activities`
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL —Å–∫—Ä–∏–ø—Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø–∏–ª–∏ –≤ —Å–∏–ª—É.

## üéÆ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" (–∏–∫–æ–Ω–∫–∞ ‚öôÔ∏è)
3. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é "–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏"
4. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ —Ç—É–º–±–ª–µ—Ä –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è
- **–í–∫–ª—é—á–µ–Ω–∞**: –ü—Ä–∏ –∑–∞–ø–∏—Å–∏ –ª—é–±–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–∏–≥—Ä–∞, –≤—ã–∫–ª–∞–¥—ã–≤–∞–Ω–∏–µ –Ω–∞ –∂–∏–≤–æ—Ç –∏ —Ç.–¥.) –º–∞–ª—ã—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è
- **–û—Ç–∫–ª—é—á–µ–Ω–∞**: –ú–∞–ª—ã—à –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Å–ø–∞—Ç—å –¥–∞–∂–µ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è
- –ö–æ–≥–¥–∞ –º–∞–ª—ã—à –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –≤ –¢–∞–º–∞–≥–æ—á–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ: "üåÖ –ú–∞–ª—ã—à –ø—Ä–æ—Å–Ω—É–ª—Å—è –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏!"
- –°–æ–æ–±—â–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å—á–µ–∑–∞–µ—Ç —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
- –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –º–µ–∂–¥—É –≤—Å–µ–º–∏ —á–ª–µ–Ω–∞–º–∏ —Å–µ–º—å–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–¢–∞–±–ª–∏—Ü–∞**: `settings`
- **–ü–æ–ª–µ**: `wake_on_activity_enabled` (BOOLEAN, DEFAULT TRUE)
- **–¢—Ä–∏–≥–≥–µ—Ä**: `wake_on_activity_trigger` –Ω–∞ —Ç–∞–±–ª–∏—Ü–µ `activities`
- **–§—É–Ω–∫—Ü–∏—è**: `wake_on_activity()` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è

### Frontend
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: `TamagotchiPage.tsx`, `Dashboard.tsx`
- **–°–µ—Ä–≤–∏—Å—ã**: `dataService.ts`
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ**: `justWokeUp` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–∏
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**: `wakeOnActivityEnabled` –≤ `SettingsState`

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
2. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `activities`
3. –¢—Ä–∏–≥–≥–µ—Ä `wake_on_activity_trigger` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
4. –§—É–Ω–∫—Ü–∏—è `wake_on_activity()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É `wake_on_activity_enabled`
5. –ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞, –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ —Å–Ω–∞ —Å–µ–º—å–∏
6. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ `baby_woke_up` —á–µ—Ä–µ–∑ `pg_notify`
7. Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–∏

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å**: –ú–∞–ª—ã—à –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –∫–∞–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏
- **–ì–∏–±–∫–æ—Å—Ç—å**: –§—É–Ω–∫—Ü–∏—é –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –ø–æ –∂–µ–ª–∞–Ω–∏—é
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ–π —Å–µ–º—å–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç, —á—Ç–æ –º–∞–ª—ã—à –ø—Ä–æ—Å–Ω—É–ª—Å—è
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–Ω–∞

## üîÑ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–§—É–Ω–∫—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π:
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Å–Ω–∞ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–µ—Ç
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üì± –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

–§—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö:
- ‚úÖ iOS Safari
- ‚úÖ Android Chrome
- ‚úÖ Desktop –±—Ä–∞—É–∑–µ—Ä—ã
- ‚úÖ PWA —Ä–µ–∂–∏–º
