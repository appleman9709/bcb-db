# üåô –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–∏–¥–µ–æ —Å–Ω–∞

## ‚ú® –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

–¢–µ–ø–µ—Ä—å –≤–∏–¥–µ–æ —Å–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ:

1. **–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–∫–ª—é—á–µ–Ω–∏–∏ —Å–Ω–∞**: –í–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é (–º–∞–ª—ã—à –∑–∞—Å—ã–ø–∞–µ—Ç)
2. **–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**: –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω—è—è —Å–µ–∫—É–Ω–¥–∞ –≤–∏–¥–µ–æ (–º–∞–ª—ã—à —É–∂–µ —Å–ø–∏—Ç)
3. **–ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–æ–∫**: –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω—è—è —Å–µ–∫—É–Ω–¥–∞ –≤–∏–¥–µ–æ

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –õ–æ–≥–∏–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:
- **`hasPlayedSleepVideo = false`**: –ü–æ–ª–Ω–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ
- **`hasPlayedSleepVideo = true`**: –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–µ–∫—É–Ω–¥—ã
- **`shouldPlayLastSecond = true`**: –§–ª–∞–≥ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–µ–∫—É–Ω–¥—ã

### –°–æ–±—ã—Ç–∏—è –≤–∏–¥–µ–æ:
1. **`onLoadedMetadata`**: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é —Å–µ–∫—É–Ω–¥—É –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
2. **`onPlay`**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞—á–∞–ª–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
3. **`onEnded`**: –û—Ç–º–µ—á–∞–µ—Ç –≤–∏–¥–µ–æ –∫–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–Ω–æ–µ

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ —Å–Ω–∞
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º —Å–Ω–∞
2. `hasPlayedSleepVideo = false`
3. –í–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é
4. –ü—Ä–∏ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ `hasPlayedSleepVideo = true`

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. `hasPlayedSleepVideo = true` (–∏–∑ –ë–î/localStorage)
3. `shouldPlayLastSecond = true`
4. –í–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–µ–∫—É–Ω–¥—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –≤–∫–ª–∞–¥–∫–∏
2. `hasPlayedSleepVideo = true` (–∏–∑ localStorage)
3. `shouldPlayLastSecond = true`
4. –í–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–µ–∫—É–Ω–¥—ã

## üîç –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
- `üåô Video played state from DB: false/true` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ –ë–î
- `üåô Will play last second of video` - –±—É–¥–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è —Å–µ–∫—É–Ω–¥–∞
- `üåô Playing last second of video, duration: X` - –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–µ–∫—É–Ω–¥—ã
- `üåô Video started playing, marking as played` - –Ω–∞—á–∞–ª–æ –ø–æ–ª–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- `üåô Video ended, marking as played` - –æ–∫–æ–Ω—á–∞–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç –±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç:
- ‚úÖ –ú–∞–ª—ã—à "–∑–∞—Å—ã–ø–∞–µ—Ç" —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –∑–∞ —Å–µ—Å—Å–∏—é
- ‚úÖ –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –º–∞–ª—ã—à —É–∂–µ "—Å–ø–∏—Ç"
- ‚úÖ –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω—è—è —Å–µ–∫—É–Ω–¥–∞ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ "—Å–ø—è—â–µ–≥–æ" –º–∞–ª—ã—à–∞
- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î –∏ localStorage
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —á–ª–µ–Ω–∞–º–∏ —Å–µ–º—å–∏

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∏–π –¢–∞–º–∞–≥–æ—á–∏ - –º–∞–ª—ã—à –∑–∞—Å—ã–ø–∞–µ—Ç –æ–¥–∏–Ω —Ä–∞–∑ –∏ —Å–ø–∏—Ç –¥–æ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è! üåô‚ú®
